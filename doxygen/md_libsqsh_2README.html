<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libsqsh: libsqsh</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libsqsh<span id="projectnumber">&#160;v1.5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">libsqsh</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md15"></a> <em>libsqsh</em> is a purely 2-Clause BSD Licensed implementation of the squashfs filesystem in C11. It covers the complete squashfs feature set, while still having minimal memory footprint.</p>
<p>Note that <em>libsqsh</em> only supports reading squashfs archives. If you want to create squashfs archives, you can either use <a href="https://github.com/plougher/squashfs-tools/">squashfs-tools</a>, which provides a command line interface, or <a href="https://github.com/AgentD/squashfs-tools-ng/">squashfs-tools-ng</a>, which provides both a command-line interface and a C library interface.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Features</h1>
<ul>
<li><b>Complete feature set</b>: libsqsh supports all features of the squashfs file system.</li>
<li><b>Thread-safe</b>: libsqsh is thread-safe and can be used in multi-threaded applications.</li>
<li><b>Safe</b>: While we cannot guarantee that libsqsh is bug-free, we have a test suite that covers lots of edge cases and fuzz the library regularly. We trust it enough to use libsqsh to open untrusted squashfs archives. libsqsh runs consistency checks over the squashfs archive to catch loops in the directory trees, invalid file names and a few other error states that are not covered by other implementations.</li>
<li><b>Fast</b>: while we need to keep a trade off between safety and speed, we try to keep the performance impact as low as possible. In <a href="https://chaos.social/@Gottox/112571790117451071">certain scenarios</a>, libsqsh ranks among the fastest squashfs implementations.</li>
<li><b>Modern C11 implementation</b>: Written in modern C11, libsqsh is designed for efficiency and compatibility with C++, C, and other languages.</li>
<li><b>Pure 2-Clause-BSD License</b>: libsqsh is licensed under the 2-Clause BSD license. This allows you to use libsqsh in any project, even commercial ones.</li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
Example</h1>
<p>This is a simple example that a) prints the content of a file and b) lists the content of a directory.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structSqshArchive.html">SqshArchive</a> *archive =</div>
<div class="line">        <a class="code hl_function" href="structSqshArchive.html#a3db88cfffd255b3781e329c0f660ba79">sqsh_archive_open</a>(<span class="stringliteral">&quot;/path/to/archive.squashfs&quot;</span>, NULL, NULL);</div>
<div class="line">assert(archive != NULL);</div>
<div class="line"> </div>
<div class="line">uint8_t *contents = <a class="code hl_function" href="sqsh__easy_8h.html#afccc90b3b193597d84a12893f10ca96a">sqsh_easy_file_content</a>(archive, <span class="stringliteral">&quot;/path/to/file&quot;</span>, NULL);</div>
<div class="line">assert(contents != NULL);</div>
<div class="line"><span class="keyword">const</span> uint64_t size = <a class="code hl_function" href="sqsh__easy_8h.html#aab996ee2782ce25c70152629a627df62">sqsh_easy_file_size2</a>(archive, <span class="stringliteral">&quot;/path/to/file&quot;</span>, NULL);</div>
<div class="line">fwrite(contents, 1, size, stdout);</div>
<div class="line">free(contents);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">char</span> **files = <a class="code hl_function" href="sqsh__easy_8h.html#afcb36a839311c71629b3b197314e0de3">sqsh_easy_directory_list</a>(archive, <span class="stringliteral">&quot;/path/to/dir&quot;</span>, NULL);</div>
<div class="line">assert(files != NULL);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; files[i] != NULL; i++) {</div>
<div class="line">    puts(files[i]);</div>
<div class="line">}</div>
<div class="line">free(files);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="structSqshArchive.html#ad9c8077e5c6e3d98cff588e203be15e1">sqsh_archive_close</a>(archive);</div>
<div class="ttc" id="asqsh__easy_8h_html_aab996ee2782ce25c70152629a627df62"><div class="ttname"><a href="sqsh__easy_8h.html#aab996ee2782ce25c70152629a627df62">sqsh_easy_file_size2</a></div><div class="ttdeci">uint64_t sqsh_easy_file_size2(struct SqshArchive *archive, const char *path, int *err)</div><div class="ttdoc">retrieves the size of a file.</div></div>
<div class="ttc" id="asqsh__easy_8h_html_afcb36a839311c71629b3b197314e0de3"><div class="ttname"><a href="sqsh__easy_8h.html#afcb36a839311c71629b3b197314e0de3">sqsh_easy_directory_list</a></div><div class="ttdeci">char ** sqsh_easy_directory_list(struct SqshArchive *archive, const char *path, int *err)</div><div class="ttdoc">retrieves the contents of a directory as a list of file names</div></div>
<div class="ttc" id="asqsh__easy_8h_html_afccc90b3b193597d84a12893f10ca96a"><div class="ttname"><a href="sqsh__easy_8h.html#afccc90b3b193597d84a12893f10ca96a">sqsh_easy_file_content</a></div><div class="ttdeci">uint8_t * sqsh_easy_file_content(struct SqshArchive *archive, const char *path, int *err)</div><div class="ttdoc">retrieves the content of a file.</div></div>
<div class="ttc" id="astructSqshArchive_html"><div class="ttname"><a href="structSqshArchive.html">SqshArchive</a></div><div class="ttdef"><b>Definition</b> <a href="sqsh__archive__private_8h_source.html#l00226">sqsh_archive_private.h:226</a></div></div>
<div class="ttc" id="astructSqshArchive_html_a3db88cfffd255b3781e329c0f660ba79"><div class="ttname"><a href="structSqshArchive.html#a3db88cfffd255b3781e329c0f660ba79">SqshArchive::sqsh_archive_open</a></div><div class="ttdeci">SQSH_NO_UNUSED struct SqshArchive * sqsh_archive_open(const void *source, const struct SqshConfig *config, int *err)</div><div class="ttdoc">initializes a archive context in heap.</div></div>
<div class="ttc" id="astructSqshArchive_html_ad9c8077e5c6e3d98cff588e203be15e1"><div class="ttname"><a href="structSqshArchive.html#ad9c8077e5c6e3d98cff588e203be15e1">SqshArchive::sqsh_archive_close</a></div><div class="ttdeci">int sqsh_archive_close(struct SqshArchive *archive)</div><div class="ttdoc">Frees the resources used by a Sqsh instance.</div></div>
</div><!-- fragment --><p>Find further examples in the <a href="../examples">examples</a> directory.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Note on Deprecation</h1>
<p>The sqsh-tools team works hard to keep the API stable. As a result, some functions are marked as deprecated but remain available for the current major version. The replacements for these deprecated functions typically have the same name with a <code>...2</code> suffix.</p>
<p>In the next major (at the time of writing v2.0.0) version, the <code>...2</code> functions will be renamed to their original names, and the deprecated functions will be removed.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Resource</h1>
<ul>
<li><a href="https://dr-emann.github.io/squashfs/squashfs.html">https://dr-emann.github.io/squashfs/squashfs.html</a> - A detailed description of the squashfs file format.</li>
<li><a href="https://github.com/plougher/squashfs-tools/">https://github.com/plougher/squashfs-tools/</a> - The original squashfs-tools implementation.</li>
<li><a href="https://github.com/AgentD/squashfs-tools-ng/">https://github.com/AgentD/squashfs-tools-ng/</a> - A rewrite of the squashfs-tools implementation with library support. In contrast to libsqsh, this library is able to write squashfs archives.</li>
<li><a href="https://github.com/vasi/squashfuse">https://github.com/vasi/squashfuse</a> - A C implementation of the squashfs filesystem.</li>
<li><a href="https://github.com/wcampbell0x2a/backhand">https://github.com/wcampbell0x2a/backhand</a> - A Rust implementation of the squashfs filesystem. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
